# 実装アップデート

## 変更内容

1. **売上明細コンポーネントの改修**
   - 宿泊、交通、食事、その他のカテゴリー区分を廃止
   - 表形式に変更し、以下の列を実装
     - 利用日（日付選択）
     - カテゴリー（宿泊、交通、食事、その他からプルダウン）
     - 単価（数値入力）
     - 人数（数値入力）
     - 販売総額（単価×人数で自動計算）
     - 支払い状況（支払済、支払未のプルダウン）
     - 支払い先（全旅行、OATA、現金、その他）
   - 小計行を追加（全ての販売総額の合計）
   - 行の追加・削除機能

2. **ヘッダー機能の追加**
   - 「団体ナビカルテ」テキストをクリックするとホームページに戻るように実装

## 技術的な変更点

1. データ構造の変更
   - 従来のカテゴリー別データ構造を保持しつつ、UI上は統合された表として表示
   - 内部的には互換性のためにカテゴリー別に整理して保存

2. 自動計算機能
   - 単価または人数が変更されると自動的に販売総額を計算
   - 手動で販売総額を上書きすることも可能

## セットアップ手順

依存関係の問題を解決するために、以下の手順を実行してください：

```bash
# package-lock.jsonとnode_modulesを削除
rm -rf node_modules package-lock.json

# 依存関係を再インストール
npm install

# date-fnsライブラリのインストール（日付選択コンポーネント用）
npm install date-fns

# 開発サーバーを起動
npm run dev
```

## 既知の問題

- 既存のデータ形式と新しいデータ形式の間で互換性の問題が発生する可能性があります。最初のロード時に古いデータが正しく表示されない場合は、新しい形式で再入力が必要な場合があります。
